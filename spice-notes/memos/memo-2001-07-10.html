<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"        "http://www.w3.org/TR/1999/REC-html401-19991224/loose.dtd"><html><head>	<title>Spice Memo (10th July 2001)</title>	<meta name="generator" content="BBEdit 6.1.2"></head><body bgcolor="#FFFFFF"><h1>Memo: Email between Steve Leach (SFKL) and Chris Dollin (CJD), Tuesday 10/07/2001. </h1> <ol><li><p>We agreed to adopt the syntax</p><pre>     //......./</pre><p>for regular expressions.  The bit in the middle should conform toGNU's regexp stuff.  See <a href="http://www.cacas.org/~wes/java/">http://www.cacas.org/~wes/java/</a>.</p><p><i>Later note: With Java 1.4 there is now a standard Java regular expression package.  This is an equally plausible candidate on which to base the regular expression stuff.</i></p></li><p>The operations should be as follows, spelling issues aside,</p><pre>    isMatch( regexp, str ) -&gt; Boolean    hasMatch( regexp, str ) -&gt; Absent | Binding    split( regexp, str ) -&gt; { String }    allMatches( regexp, str ) -&gt; { Binding }    bindingMatchString( Binding ) -&gt; String    bindingMatched( Binding ) -&gt; String    bindingMatchedLimits( Binding ) -&gt; ( lo : Int, hi : Int )    bindingMatchVar( Binding, Int ) -&gt; String    bindingMatchVarLimits( Binding, Int ) -&gt; ( lo : Int, hi : Int )</pre><p>Note that the defaults should be</p><pre>    regexp( str ) ----&gt; isMatch( regexp, str )    binding()     ----&gt; bindingMatched( binding )    binding[ n ]  ----&gt; bindingMatchVar( binding, n )</pre></li><li><p>The issue of the meaning of indexing was raised.  kers wants an operatorthat indexes from a to (a + b - 1).  sfkl described how he was now viewingthe legitimate argument to indexing as either an ordinary value or aspecial "iterator" value.  (The term "iterator" is deliberately suggestiveof the Java Iterator/Enumeration classes, of course.) </p><p>In MillScript <tt>a .. b</tt>returns a Iterator from a to b.  So, to get the effect of <tt>a .. ( a + b - 1 )</tt>one needs to define a suitable operator.  e.g. <tt>a --+ b</tt>.</p><p>To extend this, one also would like a family of operators on Iterator - something for generating a new empty Iterator and something for addingstuff onto the "front" or "back" of the Iterator.  The overall aim isto unify the subrange notation with the for-loop syntax.  A conveniencefunction "fromtoby" would be provided.</p><pre>    # Inefficient implementation that provides easy-to-understand definition.    # However, the real fromToBy wouldn't necessarily be finite (i.e. the    # 'to' argument could be infinity.)    define function fromToBy( a, b, d ) =&gt;        new Iterator(            var i = a;            for while i &lt;= b do                i, i := i + d            endfor        )    enddefine;    # And the one kers wants.  Similarly 'n' can be infinity.    define function fromByTimes( a, d, n ) =&gt;        new Iterator(            var i = a;            for j from 1 to n do                i, i := i + d            endfor        )    enddefine;</pre></li><li><p>So sfkl hopes to be able to write all of the following (spelling aside)</p><pre>    data[ a .. b ]             (same as data[ fromToBy( a, b, 1 ) ] )    for i in a .. b            (same as for i from a to b)    data[ a --+ b ]            (same as data[ fromByTimes( a, 1, b ) ] )    for i in a --+ b           (same as for i from a to a + b - 1)    data[ rev( a .. b ) ]      (same as data[ fromToBy( b, a, -1 ) ] )    for i from b downto a      (etc)    data[ rev( a --+ b ) ]    for i from a + b - 1 downto a </pre></li></ol></body></html>